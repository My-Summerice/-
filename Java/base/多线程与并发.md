#### 多线程并发三要素

- 可见性：

  ​	一个线程对一个共享变量的操作可以立即被另一个线程看到。

  - 问题举例：线程1、2（对应CPU1、2）同时对一个变量a=0进行运算操作，可能会出现线程1把对变量a运算后的结果存在了CPU1的高速缓存中，而线程2再对变量a进行运算时取到的值并不是CPU1的高速缓存中的值而是去主存中拿到了a=0的值，那么现在就相当于在线程2执行结束后缺失了线程1的过程，从而导致结果并不是我们预期的样子。

- 原子性：

  ​	一个操作或多个操作要么全部成功执行且不被打断，要么全部不执行。

  - 问题举例：比如非常经典的转账问题，A给B转账100，分为两步，1.A账户扣除一百，2.B账户增加一百，那么步骤1、2但凡任何一步执行错误都会引发对不上账的问题，所以这两步要么同时执行成功且不被打断，要么同时执行失败以保证业务不受影响。

- 有序性：

  ​	程序的执行顺序严格按照代码的先后顺序执行。

  - 问题举例：Java在执行代码的过程中会经历多次重排序（如指令重排序），而代码在经历重排序的过程中就可能会导致出现内存可见性的问题，从而引发线程安全问题。